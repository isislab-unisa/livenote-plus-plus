<!DOCTYPE html>
<html>
  <head>
    <title>Livenote++</title>
    <meta charset="UTF-8" />
    <link href="/style/styles.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <link href="https://unpkg.com/nes.css/css/nes.css" rel="stylesheet" />
    <link rel='icon' href='../img/logo.ico' type='image/x-icon'>
    <!-- bootstrap -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <!-- end boot -->
    <style>
       html, body, pre, code, kbd, samp {
           font-family: 'Press Start 2P';font-size: 1em;
      }
    </style>
  </head>
  <body onload="">
    <div id="container">
      <canvas class="pdf-canvas" id="pdf-render"></canvas>
      <div id="topButtons">

        <div id="counterDiv">
          <img id="counterPeople" src="../img/people.png" style="height: 50px";/>
          <br>
          <div class="nes-btn is-warning" id="counterButton">
            <span id="counter">0</span>
          </div>           
        </div>

        <!-- <img id="info" class="control" data-toggle="modal" data-target="#dialog-info" style="image-rendering: pixelated; position: relative" src="../img/nes.png"/> -->

        <div id="full-chat-slave">
          <button class="poll-slave nes-btn is-warning control" id="full-screen" style="width: auto;"> Full-Screen <i class="fas fa-compress"></i></button>
          <img  src="../img/chat.png"/ id="chatLogo" onclick="showChatLogo()">
          <br>
          <button type="button" class="poll-slave nes-btn" data-toggle="modal" data-target="#dialog-sondaggio" id="click-poll" style="display: none;"  >Vote poll</button>
          <br>
          <button type="button" class="poll-slave nes-btn" data-toggle="modal" data-target="#dialog-pollDynamical" id="viewPollDynamical" style="display: none;">View Poll</button>
        </div>
      </div>
      <div id="bottomButtons">
        <progress class="nes-progress is-pattern control" id="progress-bar" value="1"  ></progress>
      </div>
    </div>

    <!-- baloon -->
    <div id ="liveperson" class="draggable big-video" style="display:none;"> 
       <div id ="video-balloon-container"> 
        <video id="video-balloon" class = "web-cam" playsinline></video>
        <span id="video-avatar"  style="" class="nes-bcrikko"></span> 
        <div id = "pokemon" class = "nes-bcrikko" ></div>
        <img id = "play" class="nes-avatar is-large" alt="Gravatar image example" src="../img/play.png" style="image-rendering: pixelated;">
        <img id = "vol"class="nes-avatar is-large" alt="Gravatar image example" src="../img/volume.png" style="image-rendering: pixelated;">
        <span id="size" class="nes-icon is-medium star"> </span>
        </section>
       </div>
    </div>

    <!-- chat -->
    <!-- <div  id="chat" class="nes-table-responsive draggable ">
      <table class=" nes-table  is-bordered is-centered table-chat " style="position: absolute;bottom: 0;  background-color: rgba(255, 255, 255, 0.5);">
        <tbody>
          <tr>
            <td style="width:25%;">
              <div class="lists users">
                  <ul id="ul-users" class="nes-list is-disc ">
                  </ul>
              </div>
              <div class="nusers"> Online: <span id="nusers">0</span> </div>
            </td>
            <td style="width:75%">
              <section id="chat-list" class="message-list chat-list"></section>
              <div class="nes-field is-inline">
                <input type="text" id="chat_input" class="nes-input is-dark" placeholder="write a message">
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div> -->

    <div id="mysidenavChat" class="sidenavChat">
      <!-- <section id="buttonChat">

      </section> -->
      <section id="chat-list" class="message-list chat-list">

      </section>
      <div class="nes-field is-inline" id="messageChat">
        <textarea id="chat-input" class="nes-textarea" placeholder="Write a message"></textarea>
      </div>
    </div>

    <!-- Modal chat enter-->
    <div class="modal fade" id="dialog-nickname" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Enter your nickname</h4>
          </div>
          <div class="modal-body">
            <input type="text" id="input-nickname" class="nes-input" placeholder="nickname">
            <span class="errorPoll">You must insert a nickname</span>
          </div>
          <div class="modal-footer">
            <button class="nes-btn" data-dismiss="modal">Cancel</button>
            <button class="nes-btn is-primary" id="enter">Enter</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal chat error-->
    <div class="modal fade" id="dialog-error-nickname" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Error you must enter a nickname.</h4>
          </div>
          <div class="modal-body">
            <input type="text" id="input-nickname" class="nes-input" placeholder="nickname">
          </div>
          <div class="modal-footer">
            <button class="nes-btn is-primary center" id="error-ok" value="default action" data-dismiss="modal">ok</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal info-->
    <div class="modal fade" id="dialog-info" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Livenote++</h4>
          </div>
          <div class="modal-body">
            <p>Welcome to our presentation system.</p>
            <p>This is an experimental version a lot of</p>
            <p>functionalities will not work correctly.</p>
            <p>We now support only Desktop browser.</p>
            <p>Commands:</p>
            <p>CTRL + ALT + o -> Chat</p>
            <p>CTRL + ALT + m -> Hide controls</p>
            <p>Presenter commands:</p>
            <p>CTRL + ALT + l -> Play video and audio</p>
            <p>CTRL + ALT + p -> Hide video (Avatar mode, only audio is shared)</p>
            <p>CTRL + ALT + a -> Change avatar</p>
            <p>CTRL + ALT + q -> Change color of drawing</p>
            <p>CTRL + ALT + w -> Change line width of drawing</p>

            <p>Please: consider to refresh your page, if something wrong!</p>
            <p>Notice: the presentation is totaly stateless,</p>
            <p>all your changing or messages are not stored.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
 
    <div class="modal fade" id="dialog-sondaggio" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content send Poll-->
        <div class="modal-content">
          
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 id="titlePoll" class="modal-title"></h4>
            </div> 

            <div class="modal-body" id="pollsTable">
            </div>

            <div class="modal-footer">
              <button type="button" class="nes-btn" data-dismiss="modal" id="sendVotePoll">Send</button>
            </div>

        </div>
      </div>
    </div>

    <div class="modal fade" id="dialog-pollDynamical" role="dialog">
      <div class="modal-dialog">
        
        <!-- Modal content view Poll-->
        <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 id="pollTitleDynamical" class="modal-title" style="text-align: center;" ></h4>
            </div>
            <div class="modal-body" id="pollDynamical">
            </div>
        </div>
      </div>
    </div>

    <div id="ytframe" class="draggable" style="pointer-events: none;">
      <div id="handle" class="handle">
        <span>Drag me</span>
      </div>
      <div id="ytplayer"></div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
    <script type="module" src="/js/livenote-drag.js" ></script>
    <script src="/js/common.js" ></script>
    <script type="module" src="/js/dist/s.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- boot -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <script src="https://www.youtube.com/player_api"></script>

    <script>
      window.onload  = function() {
       initclient(window.location.pathname)
       initThis(1,window.location.origin+"/sessions"+window.location.pathname+".pdf",1)
      }
      window.onresize = function(){
          resize()
      }
      
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-69374402-3%22%3E"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-69374402-3');
      gtag('send', 'pageview');
      gtag('set', 'anonymizeIp', true); 
    </script>
  </body>
</html>
